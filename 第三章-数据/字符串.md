## å­—ç¬¦ä¸²

---

### å­—ç¬¦ä¸²çš„æ¦‚å¿µ

å­—ç¬¦ä¸²å³æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„*æ–‡æœ¬*ã€‚å®ƒæ¥è‡ªè®¡ç®—æœºæ·±å¤„ï¼Œå´æ‹¥æœ‰äººç±»å¯è¯»çš„å½¢å¼ã€‚å®ƒæ˜¯åœ¨äººæœºä¹‹é—´ä¼ é€’ä¿¡æ¯çš„ä½¿è€…ï¼Œä¸€åº§å­—ç¬¦å †å’èµ·æ¥çš„æ¡¥æ¢ã€‚å®ƒçš„å®šä¹‰å½¢å¼æ˜¯ä¸€å¯¹å¼•å· `""` æˆ– `''` ï¼Œå¼•å·ä¸­çš„å†…å®¹å°±æ˜¯å®ƒçš„å…¨éƒ¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `+` å·æ¥æ‹¼æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `length` å±æ€§æ¥è·å¾—å®ƒçš„é•¿åº¦ï¼Œä½¿ç”¨ä¸‹æ ‡ `[]` æ¥è·å¾—å®ƒåœ¨æŸä¸ªä½ç½®ä¸Šçš„å­—ç¬¦ã€‚

```javascript
const s = "Hello ";
alert(s.length);         // 6
alert(s + "world");      // "Hello world"
alert(s + 'JavaScript'); // "Hello JavaScript"
```

ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦éƒ½å…·æœ‰ä¸€ä¸ªç¼–å·ï¼Œè¿™ä¸ªç¼–å·ä» `0` å¼€å§‹ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦çš„ç¼–å·å°±æ˜¯å®ƒçš„é•¿åº¦å‡å» `1`ã€‚å¦‚æœæŒ‡å®šç¼–å·è¶…å‡ºäº†é™åº¦ï¼Œåˆ™ä¼šå¾—åˆ°ä¸€ä¸ª `undefined`ã€‚

```javascript
const s = "Hello world";
alert(s[0]);            // "H";
alert(s.length);        // 11
alert(s[s.length]);     // undefined
alert(s[s.length - 1]); // "d"
alert(s[-1]);           // undefined
```



åƒæ•°å€¼ä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨ `===` å’Œ `!==` æ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦å®Œå…¨ç›¸ç­‰ã€‚

```javascript
let a = "aaa", b = "bbb";
alert(a === b);     // false
alert(a !== b);     // true
alert(a === "aaa"); // true
```



---

ç»ƒä¹  3.1.1

1. ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œä½¿ç”¨ `prompt` å‡½æ•°å¾—åˆ°ç”¨æˆ·è¾“å…¥çš„çš„åå­—ï¼Œç”¨ `alert` å¯¹è¿™ä¸ªåå­—æ‰“æ‹›å‘¼ã€‚
2. ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œä»ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ä¸­è·å¾—ä¸€ä¸ªéšæœºä½ç½®ä¸Šçš„å­—ç¬¦ã€‚ï¼ˆå¤‡æ³¨ï¼šä½ å¯èƒ½éœ€è¦å¤ä¹ â€œæ•°å€¼â€ä¸€èŠ‚ã€‚ï¼‰

---





### è½¬ä¹‰å­—ç¬¦

æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„å­—ç¬¦ï¼Œè¿™äº›å­—ç¬¦æ— æ³•ç”¨é€šå¸¸çš„æ–¹å¼è¾“å…¥ï¼Œä¾‹å¦‚æ¢è¡Œç¬¦ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç±»ç§°ä¸º*è½¬ä¹‰å­—ç¬¦*çš„æ ‡è®°æ¥è¡¨ç¤ºè¿™äº›å­—ç¬¦ã€‚å®ƒä»¬çš„åŸç†æ˜¯ï¼Œé€šè¿‡åœ¨æ™®é€šçš„å­—ç¬¦å‰åŠ ä¸Šç¬¦å· `\` ï¼Œæ¥æ”¹å˜è¿™ä¸ªå­—ç¬¦æœ¬æ¥çš„å«ä¹‰æˆ–è€…ä½œç”¨ã€‚JavaScript è§„å®šäº†ä¸€äº›è½¬ä¹‰å­—ç¬¦ï¼Œå¦‚ä¸‹è¡¨ã€‚


| è½¬ä¹‰å­—ç¬¦ | å«ä¹‰         |
| -------- | ------------ |
| \\\      | åæ–œæ æœ¬èº«   |
| \n       | æ¢è¡Œç¬¦       |
| \r       | å›è½¦ç¬¦       |
| \t       | æ°´å¹³åˆ¶è¡¨ç¬¦   |
| \v       | å‚ç›´åˆ¶è¡¨ç¬¦   |
| \b       | é€€æ ¼ç¬¦       |
| \f       | æ¢é¡µç¬¦       |
| \u       | Unicode ç ç‚¹ |

ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨ç¤ºä¾‹ï¼š

```javascript
alert("Hello\\world!"); // Hello\world!
alert("Hello\nworld!"); // Hello
                        // world!
alert("Hello\rworld!"); // Hello
                        // world!
alert("Hello\tworld!"); // Hello	world!
// \v \b \f ä¸‰ä¸ªå­—ç¬¦åœ¨ä¸€èˆ¬çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ— æ³•æ˜¾ç¤º
alert("Hello\vworld!"); // Helloâ–¡world!
alert("Hello\bworld!"); // Helloâ–¡world!
alert("Hello\fworld!"); // Helloworld!
```

ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ `\\` æ¥å¾—åˆ° `\` å­—ç¬¦æœ¬èº«ï¼Œæˆ–è€… `\n` ä½œä¸ºæ¢è¡Œç¬¦å³å¯ã€‚`\u` è¡¨ç¤ºä¸€ä¸ª Unicode ç ç‚¹ï¼Œå…³äºå®ƒçš„è¯¦ç»†å†…å®¹è§ä¸‹æ–‡ã€‚

**è½¬ä¹‰å¼•å·**

å‡å¦‚ä½ çš„å­—ç¬¦ä¸²é‡Œé¢éœ€è¦åŒ…å«å•å¼•å·å’ŒåŒå¼•å·ï¼Œä½†æ˜¯åˆä¸èƒ½ä¸è¡¨ç¤ºå­—ç¬¦ä¸²å¼€å¤´ç»“å°¾çš„å¼•å·å†²çªï¼Œå¯ä»¥ç”¨*è½¬ä¹‰å¼•å·*çš„åŠæ³•æ¥è§„é¿ã€‚ä½ å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­å‡ºç°çš„å¼•å·å‰åŠ  `\` ä»¥è¿›è¡Œè½¬ä¹‰ï¼Œå¦‚æœä¸ä¼šå‘ç”Ÿå†²çªï¼Œåˆ™ä¸éœ€è¦è½¬ä¹‰ã€‚

```javascript
const s1 = "He said: \"Hello world!\""; // He said: "Hello world!"
const s2 = "He said: "Hello world!"";   // SyntaxError: Unexpected identifier
const s3 = "He said: \'Hello world!\'"; // He said: 'Hello world!'
const s4 = "He said: 'Hello world!'";   // He said: 'Hello world!'
```





### Unicode

åœ¨æ·±å…¥æ¢è®¨ JavaScript ä¸­çš„å­—ç¬¦ä¸²ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦äº†è§£ä¸€ä¸‹ **Unicode**ã€‚

Unicode æ˜¯ä¸–ç•Œä¸Šæœ€ä¸ºé€šç”¨çš„å­—ç¬¦é›†ï¼Œå®ƒå¯ä»¥çœ‹åšä¸€åˆ‡å…¶ä»–å­—ç¬¦é›†ï¼ˆå¦‚ ASCIIï¼ŒGBK ç­‰ï¼‰çš„åˆä½“ï¼Œæ¶µç›–äº†ç›®å‰ä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰å·²çŸ¥çš„ç°å­˜ä¹¦å†™ç³»ç»Ÿï¼Œä»æ¬§æ´²çš„æ‹‰ä¸å’Œè¥¿é‡Œå°”å­—æ¯ï¼Œåˆ°è¿œä¸œçš„æ±‰å­—ã€æ—¥æ–‡ã€éŸ©æ–‡ï¼Œå†åˆ°ä¸œå—äºšåœ†æ¶¦çš„å­—æ¯æ–‡å­—ã€å°ç¬¬å®‰äººçš„å¥‡ç‰¹ç¬¦å·ï¼Œç”šè‡³ç›²æ–‡ã€emoji ï¼Œéƒ½åœ¨ Unicode è¿™ä¸€å­—ç¬¦é›†çš„æ¶µç›–èŒƒå›´å†…ã€‚å®ƒçš„å¼€å‘ä¸å®ç°éµå¾ª ISO çš„å›½é™…æ ‡å‡†ï¼Œæœ‰è®¸å¤šå…·ä½“çš„æ–¹å¼æ¥å¤„ç†éµå¾ª Unicode æ ‡å‡†çš„æ–‡æœ¬å†…å®¹ï¼ŒåŒ…æ‹¬ UTF-8ã€UTF-16ã€UTF-32 ç­‰ã€‚JavaSciript ä¸­çš„å­—ç¬¦ä¸²ä½¿ç”¨ Unicode ä½œä¸ºå¤„ç†ä¾æ®ï¼Œä»¥ä¾¿å……åˆ†èå…¥å›½é™…åŒ–çš„ Web ç¯å¢ƒä¸­ã€‚

> Unicode æºäºä¸€ä¸ªå¾ˆç®€å•çš„æƒ³æ³•ï¼šå°†å…¨ä¸–ç•Œæ‰€æœ‰çš„å­—ç¬¦åŒ…å«åœ¨ä¸€ä¸ªé›†åˆé‡Œï¼Œè®¡ç®—æœºåªè¦æ”¯æŒè¿™ä¸€ä¸ªå­—ç¬¦é›†ï¼Œå°±èƒ½æ˜¾ç¤ºæ‰€æœ‰çš„å­—ç¬¦ï¼Œå†ä¹Ÿä¸ä¼šæœ‰ä¹±ç äº†ã€‚
>
> â€”â€”é˜®ä¸€å³°ï¼ˆ2014å¹´ï¼‰

Unicode çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯ï¼Œä» 0 å¼€å§‹ï¼Œä¸ºæ¯ä¸€ä¸ªåŒ…å«åœ¨è¿™ä¸ªå­—ç¬¦é›†ä¸­çš„å­—ç¬¦åˆ†é…ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„æ•°å­—ç¼–å·ï¼Œç§°ä¸ºâ€œç ç‚¹ï¼ˆcode pointï¼‰â€ï¼Œå¹¶å°†ç›¸åº”çš„å­—å½¢å’Œæ„ä¹‰ä¸è¿™ä¸ªç¼–å·ä¸€ä¸€å¯¹åº”ã€‚å¦‚ï¼š`U+0000`ï¼Œ`U+0FE3`ï¼Œ`U+CFFF` ç­‰ã€‚

å‰ç¼€ `U+` è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„åå…­è¿›åˆ¶æ•°æ˜¯ä¸€ä¸ª Unicode ç ç‚¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹ æƒ¯ä½¿ç”¨åå…­è¿›åˆ¶æ•°æ¥è¡¨è¾¾ Unicode ç ç‚¹ã€‚

ä¾‹å¦‚ï¼Œä¸­æ–‡â€œå¥½â€çš„ç ç‚¹æ˜¯ï¼š`U+597D`ã€‚

Unicode ä¸­ä¸åŒçš„ç¬¦å·ä¸æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨å®šä¹‰çš„ï¼Œè€Œæ˜¯åˆ†æˆå¤šä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸå¯ä»¥å­˜æ”¾ 2<sup>16</sup> ï¼ˆ65536ï¼‰ä¸ªå­—ç¬¦ï¼Œç§°ä¸ºä¸€ä¸ªå¹³é¢ã€‚ç›®å‰ä¸€å…±æœ‰ 17 ä¸ªå¹³é¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•´ä¸ª Unicode å­—ç¬¦é›†çš„å¤§å°ç°åœ¨æ˜¯ 2<sup>21</sup>ã€‚

æœ€å‰é¢çš„ 65536 ä¸ªå­—ç¬¦ä½ï¼Œç§°ä¸º*åŸºæœ¬å¤šæ–‡ç§å¹³é¢*ï¼ˆç¼©å†™ä¸º BMPï¼‰ï¼Œå®ƒçš„ç ç‚¹èŒƒå›´æ˜¯ä» 0 ä¸€ç›´åˆ° 2<sup>16</sup>-1 ï¼Œå†™æˆ 16 è¿›åˆ¶å°±æ˜¯ä»`U+0000` åˆ° `U+FFFF`ã€‚æ‰€æœ‰æœ€å¸¸è§çš„å­—ç¬¦éƒ½æ”¾åœ¨è¿™ä¸ªå¹³é¢ï¼Œè¿™æ˜¯ Unicode æœ€å…ˆå®šä¹‰å’Œå…¬å¸ƒçš„ä¸€ä¸ªå¹³é¢ã€‚å‰©ä¸‹çš„å­—ç¬¦éƒ½æ”¾åœ¨è¾…åŠ©å¹³é¢ï¼ˆç¼©å†™ä¸º SMPï¼‰ï¼Œç ç‚¹èŒƒå›´ä» `U+010000` ä¸€ç›´åˆ° `U+10FFFF`ã€‚

**1. UTF-32**

Unicode åªè§„å®šäº†æ¯ä¸ªå­—ç¬¦çš„ç ç‚¹ä½œä¸ºç»Ÿä¸€æ ‡å‡†ï¼Œè€Œåœ¨å®é™…åº”ç”¨ä¸­åŸºäº Unicode æ ‡å‡†æœ‰å¤šç§å…·ä½“å®ç°æ–¹å¼ï¼Œå®ƒä»¬ç»Ÿç§°ä¸º*ç¼–ç æ–¹æ³•*ã€‚æœ€ç›´è§‚çš„ç¼–ç æ–¹æ³•æ˜¯ï¼Œæ¯ä¸ªç ç‚¹ä½¿ç”¨å…«ä¸ªåå…­è¿›åˆ¶æ•°ï¼ˆå³å››ä¸ªå­—èŠ‚ï¼‰è¡¨ç¤ºï¼Œå­—èŠ‚å†…å®¹å®Œå…¨å¯¹åº”ç ç‚¹ã€‚è¿™ç§ç¼–ç æ–¹æ³•ç§°ä¸º **UTF-32** ã€‚æ¯”å¦‚ï¼Œç ç‚¹ `U+0000` å°±ç”¨å››ä¸ªå­—èŠ‚çš„ 0 è¡¨ç¤ºï¼Œç ç‚¹597Då°±åœ¨å‰é¢åŠ ä¸¤ä¸ªå­—èŠ‚çš„0ã€‚

ä½¿ç”¨ UTF-32 æ–¹å¼ç¼–ç çš„â€œå¥½â€å’Œ `U+0000`ï¼ˆç©ºå­—ç¬¦ï¼‰å¦‚ä¸‹ï¼š

`U+0000 => 0x0000 0000`

`U+597D => 0x0000 597D`

UTF-32 çš„ä¼˜ç‚¹åœ¨äºï¼š

1. è½¬æ¢è§„åˆ™ç®€å•ç›´è§‚

2. æŸ¥æ‰¾æ•ˆç‡é«˜ã€‚


ç¼ºç‚¹åœ¨äºï¼š**æµªè´¹ç©ºé—´**ï¼ŒåŒæ ·ä¸€ä»½è‹±è¯­æ–‡æœ¬ï¼Œç”¨å®ƒè¿›è¡Œç¼–ç æ‰€å ç”¨çš„ç©ºé—´æ˜¯åŸå§‹çš„ ASCII ç¼–ç çš„å››å€ã€‚è¿™æ˜¯è‡´å‘½çš„ç¼ºç‚¹ï¼Œå› æ­¤å®é™…ä¸Šæ²¡æœ‰äººä½¿ç”¨è¿™ç§ç¼–ç æ–¹æ³•ï¼Œç›®å‰çš„äº’è”ç½‘é¡µé¢æ ‡å‡†ï¼ˆHTML 5ï¼‰å°±æ˜æ–‡è§„å®šï¼Œç½‘é¡µä¸èƒ½ä»¥ UTF-32 æ–¹å¼è¿›è¡Œç¼–ç ã€‚

**2. UTF-8**

äººä»¬éœ€è¦çš„æ˜¯ä¸€ç§èŠ‚çœç©ºé—´çš„ç¼–ç æ–¹æ³•ï¼Œäºæ˜¯ **UTF-8** åº”è¿è€Œç”Ÿã€‚UTF-8 æ˜¯ä¸€ç§*å˜é•¿*çš„ç¼–ç æ–¹æ³•ï¼Œä¸€ä¸ªå­—ç¬¦çš„ç¼–ç é•¿åº¦ï¼Œä» 1 ä¸ªå­—èŠ‚åˆ° 4 ä¸ªå­—èŠ‚ä¸ç­‰ã€‚å¸¸ç”¨çš„å­—ç¬¦ç¼–ç è¾ƒçŸ­ï¼Œè€Œæœ€å‰é¢çš„ 128 ä¸ªå­—ç¬¦ï¼Œåªä½¿ç”¨ 1 ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä¸ ASCII çš„æ–¹å¼å®Œå…¨ç›¸åŒã€‚

å¦‚ä¸‹è¡¨ï¼š

| ç¼–ç èŒƒå›´            | å ç”¨å­—èŠ‚æ•° |
| ------------------- | ---------- |
| 0x0000 - 0x007F     | 1          |
| 0x0080 - 0x07FF     | 2          |
| 0x0800 - 0xFFFF     | 3          |
| 0x010000 - 0x10FFFF | 4          |

UTF-8 å¯¹å­˜å‚¨ç©ºé—´çš„èŠ‚çœä½¿å¾—å®ƒæˆä¸ºäº’è”ç½‘ä¸Šæœ€å¸¸ç”¨çš„ç¼–ç æ–¹å¼ã€‚

**3. UTF-16**

**UTF-16** ç¼–ç æ–¹å¼ä»‹äº UTF-32 ä¸ UTF-8 ä¹‹é—´ï¼ŒåŒæ—¶ç»“åˆäº†*å®šé•¿*å’Œ*å˜é•¿*ä¸¤ç§ç¼–ç æ–¹æ³•çš„ç‰¹ç‚¹ã€‚

å®ƒçš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼šåŸºæœ¬å¤šæ–‡ç§å¹³é¢çš„å­—ç¬¦å ç”¨ 2 ä¸ªå­—èŠ‚ï¼Œå…¶ä½™çš„ï¼ˆä¸é‚£ä¹ˆå¸¸ç”¨ï¼‰çš„å­—ç¬¦å ç”¨ 4 ä¸ªå­—èŠ‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒUTF-16 çš„ç¼–ç é•¿åº¦è¦ä¹ˆæ˜¯ 2 ä¸ªå­—èŠ‚ï¼ˆ`U+0000` åˆ° `U+FFFF`ï¼‰ï¼Œè¦ä¹ˆæ˜¯ 4 ä¸ªå­—èŠ‚ï¼ˆ`U+010000` åˆ° `U+10FFFF`ï¼‰ã€‚æ ¹æ®å­—ç¬¦çš„ Unicode ç ç‚¹è¿›è¡Œç›¸åº”çš„ UTF-16 ç¼–ç çš„æ—¶å€™ï¼Œé¦–å…ˆåŒºåˆ†è¿™æ˜¯åŸºæœ¬å¤šæ–‡ç§å¹³é¢çš„å­—ç¬¦ï¼ˆç ç‚¹ `U+FFFF` ä»¥å†…ï¼‰ï¼Œè¿˜æ˜¯è¾…åŠ©å¹³é¢å­—ç¬¦ã€‚å¦‚æœæ˜¯å‰è€…ï¼Œç›´æ¥å°†ç ç‚¹è½¬ä¸ºå¯¹åº”çš„åå…­è¿›åˆ¶å½¢å¼ï¼Œé•¿åº¦ä¸º 2 å­—èŠ‚ã€‚

å¦‚ï¼š `U+597D => 0x597D`

è€Œè¾…åŠ©å¹³é¢å­—ç¬¦çš„ç¼–ç åˆ™æ ¹æ® Unicode 3.0 æ ‡å‡†ç»™å‡ºçš„å…¬å¼ï¼Œç”¨ JavaScript ä»£ç ç¼–å†™å¦‚ä¸‹ï¼š

```javascript
// å‡è®¾ c æ˜¯å¾…ç¼–ç çš„å­—ç¬¦ç ç‚¹
const H = Math.floor((c - 0x10000) / 0x400) + 0xD800;
const L = (c - 0x10000) % 0x400 + 0xDC00;
```



å…¶ä¸­ `H` å°±æ˜¯æœ€ç»ˆç¼–ç çš„å·¦ 4 ä½åå…­è¿›åˆ¶æ•°ï¼Œ`L` å°±æ˜¯å³ 4 ä½ã€‚ç”¨ä¸€ä¸ªç ç‚¹ä¸º `U+1D306` çš„å­—ç¬¦æ¼”ç¤ºï¼š

```javascript
// const c = 0x1D306;
const H = Math.floor((0x1D306 - 0x10000) / 0x400) + 0xD800;
const L = (0x1D306 - 0x10000) % 0x400 + 0xDC00;
// H = 0xD834, L = 0xDF06
// U+1D306 çš„ UTF-16 ç¼–ç å³ 0xD834 DF06
```



**4. UCS-2**

JavaScript æ‰€é‡‡ç”¨çš„ç¼–ç æ–¹å¼ç§°ä¸º *UCS-2*ï¼Œå®ƒçš„å‡ºç°æ˜¯åŸºäºå†å²åŸå› ï¼Œå¯ä»¥çœ‹åš UTF-16 çš„å­é›†ã€‚å› æ­¤ï¼ŒJavaScript ä¸­å­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦éƒ½è‡³å°‘å ç”¨ 2 å­—èŠ‚ç©ºé—´ï¼ŒBMP ä»¥å¤–çš„å­—ç¬¦åˆ™é€šè¿‡ä¸¤ä¸ª 2 å­—èŠ‚çš„å­—ç¬¦æ¥è¡¨ç¤ºè¿™ä¸ªå­—ç¬¦çš„ç¼–ç ã€‚è¿™ç§å®ç°æ–¹å¼ç§°ä¸º*ä»£ç†å¯¹*ï¼Œç›¸å…³ç»†èŠ‚å¯å‚è§æœ¬ä¹¦é™„å½•ã€‚

2015 å¹´çš„ ECMAScript 6 æ ‡å‡†æä¾›äº†å¦ä¸€ç§æ›´åŠ æ–¹ä¾¿çš„è¡¨ç¤ºé BMP å­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨ä¸€å¯¹å¤§æ‹¬å·å°†å­—ç¬¦ç ç‚¹åŒ…è£¹èµ·æ¥ï¼Œå†™åœ¨ `\u` å‰ç¼€åé¢ï¼š

`alert("\u{1316c}");  // "ğ“…¬"ï¼ˆå¤åŸƒåŠè±¡å½¢æ–‡å­—â€œé¹…â€ï¼‰`



åœ¨ JavaScript çš„å­—ç¬¦ä¸²ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥æ‰“å‡ºä¸€ä¸ªå­—ç¬¦å¹¶æ”¾åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ *Unicode è½¬ä¹‰æ ‡è®°*æ¥è¾“å…¥ Unicode ä¸­çš„å…¶å®ƒå­—ç¬¦ã€‚è½¬ä¹‰æ ‡è®°å†™ä½œ `\u` ï¼Œåæ¥å­—ç¬¦ç ç‚¹çš„åå…­è¿›åˆ¶è¡¨ç¤ºã€‚å¦‚æ•°å­—è¡¨ç¤ºæ–¹å¼ä¸€æ ·ï¼ŒJavaScript ä¸­çš„åå…­è¿›åˆ¶æ•°å­—ä¸åŒºåˆ†å¤§å°å†™ã€‚æ³¨æ„ï¼š**ä½ è‡³å°‘è¦å†™ 4 ä½åå…­è¿›åˆ¶æ•°å­—**ï¼Œå¦åˆ™ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚å¦‚ä¸‹ï¼š

```javascript
alert("\u0041");                         // "A"
alert("\u41");                           // SyntaxError: Invalid Unicode escape sequence
alert("\u597D");                         // "å¥½" 
alert("\u4f60\u597d");                   // "ä½ å¥½"
alert("\u3053\u3093\u306b\u3061\u306f"); // "ã“ã‚“ã«ã¡ã¯"
alert("\uc5b4\ub5bb\uac8c ì§€ë‚´ë‹ˆ");       // "ì–´ë–»ê²Œ ì§€ë‚´ë‹ˆ"
alert("\u2600");                         // "â˜€"
alert("\u2614");                         // "â˜”"
alert("\u3a3\u222b\u221e");              // "Î£âˆ«âˆ"
alert("æˆ‘æ˜¯\u5c0f\u53ef\u7231ï¼");        // "æˆ‘æ˜¯å°å¯çˆ±"
```





### å­—ç¬¦ä¸²æ“ä½œ

JavaScript æä¾›äº†ä¸€ç»„å®ç”¨çš„å­—ç¬¦ä¸²æ“ä½œå‡½æ•°ï¼Œä»¥ä¾¿äºå®Œæˆè¯¸å¤šå¸¸è§çš„æ–‡æœ¬æ“ä½œéœ€æ±‚ã€‚

**toUpperCase å’Œ toLowerCase**

è¿™ä¸¤ä¸ªå‡½æ•°ç”¨äºè½¬æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å¤§å°å†™ï¼Œå¹¶è¿”å›è½¬æ¢åçš„ç»“æœã€‚

```javascript
const s = "Hello world";
alert(s.toUpperCase());                 // "HELLO WORLD"
alert(s.toLowerCase());                 // "hello world"
alert("Madam, I'm Adam.".toUpperCase()) // "MADAM, I'M ADAM."
```



**replace**

è¿™ä¸ªå‡½æ•°ç”¨äºåœ¨ç»™å®šå­—ç¬¦ä¸²ä¸­æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡æœ¬ã€‚

```javascript
const s = "Hello world";
const s2 = s.replace("world", "JavaScript");
alert(s2);                  // "Hello JavaScript"
alert(s.replace("l", "k")); // "Heklo world"
```

`replace` å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª*æ­£åˆ™è¡¨è¾¾å¼*ï¼Œç”¨äºæè¿°æ›´åŠ å¤æ‚çš„æ¨¡å¼æˆ–è€…è¿›è¡Œå…¨å±€æ€§çš„æ›¿æ¢ã€‚å…³äºæ­£åˆ™è¡¨è¾¾å¼çš„æ¦‚å¿µå’Œç»†èŠ‚æˆ‘ä»¬å°†åœ¨ç¬¬å…«ç« è®¨è®ºã€‚



**indexOf** å’Œ **lastIndexOf**

`indexOf` å‡½æ•°ç”¨äºåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ä»å·¦å¾€å³æœç´¢ç¬¬ä¸€å¤„åŒ¹é…çš„ä½ç½®ï¼Œä»¥ 0 å¼€å§‹è®¡æ•°ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå¾—åˆ°çš„å€¼ä¸º -1ã€‚å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨äºæŸ¥æ‰¾æŒ‡å®šå‡ºç°æ¬¡æ•°çš„å‡ºç°ä½ç½®ã€‚

```javascript
const s = "Hello world";
alert(s.indexOf("H"));       // 0
alert(s.indexOf("l"));       // 2
alert(s.indexOf("llo"));     // 2
alert(s.indexOf("l", 3));    // 3
alert(s.indexOf("666"));     // -1
```

`lastIndexOf` å‡½æ•°ä¸ `indexOf` ç±»ä¼¼ï¼Œä½†æ˜¯æœç´¢æ–¹å‘ç›¸åï¼Œä»åå¾€å‰æŸ¥æ‰¾ã€‚

```javascript
const s = "Hello world!";
alert(s.lastIndexOf("llo"));     //2
alert(s.lastIndexOf("l"));       //9
alert(s.lastIndexOf("l", 4));    //3
```





### è½¬æ¢è§„åˆ™

- æ•°å­—å’Œå­—ç¬¦ä¸²ç›¸åŠ ï¼Œä¼šå°†æ•°å­—è½¬æ¢ä¸ºåè¿›åˆ¶å½¢å¼ï¼Œä¸å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¾—åˆ°æ‹¼æ¥åçš„ç»“æœã€‚

  ```javascript
  alert(1 + "1");                    // "11"
  alert("My number is " + 15 + "2"); // "My number is 152"
  alert("My number is " + 15 + 2);   // "My number is 152"
  ```

- æ•°å­—ä¸å­—ç¬¦ä¸²ç›¸å‡ï¼Œä¼šå…ˆå°è¯•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ï¼Œç„¶åè¿›è¡Œç›¸å‡ã€‚

  ```javascript
  alert(100 - "10");   // 90
  alert("100" - 10);   // 90
  alert("100" - "10"); // 90
  ```

- å¸ƒå°”å€¼åœ¨å‚ä¸æ•°å­—è¿ç®—çš„æ—¶å€™,  `true` ä¼šè¢«è½¬æ¢ä¸º 1ï¼Œ`false` ä¼šè¢«è½¬æ¢ä¸º 0ï¼Œç„¶åè¿›è¡Œè¿ç®—ã€‚

  ```javascript
  alert(1 + true);  // 2
  alert(1 + false); // 1
  ```

- å¸ƒå°”å€¼ä¸å­—ç¬¦ä¸²ç›¸åŠ ï¼Œä¼šå°†å¸ƒå°”å€¼ç›´æ¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

  ```javascript
  alert("I think it is " + true); // "I think it is true"
  alert("Oh, it's " + false);     // "Oh, it's false"
  ```

- å¸ƒå°”å€¼ä¸å­—ç¬¦ä¸²ç›¸å‡ï¼Œåˆ™ä¼šä¾æ®ä¸Šè¿°è½¬æ¢è§„åˆ™ï¼Œå°†å¸ƒå°”å€¼å’Œå­—ç¬¦ä¸²åˆ†åˆ«è½¬æ¢ä¸ºæ•°å­—ï¼Œç„¶åè¿›è¡Œè¿ç®—ã€‚

  ```javascript
  alert(true - "1");   // 0
  alert(false - "10"); // -10
  ```





### æ¨¡æ¿å­—ç¬¦ä¸²

å‡å¦‚æˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²é‡Œå†™é•¿é•¿çš„ä¸€æ®µè¯ï¼š

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Sed eleifend vitae massa sed porttitor. Aliquam erat volutpat.
Maecenas feugiat, urna sit amet feugiat gravida,
felis ante lobortis tortor, vel dictum enim sem vitae eros.
Vivamus mi eros, feugiat ut ex laoreet,
commodo mattis nisi. Praesent mollis augue eu ligula scelerisque,
et accumsan mauris pretium. Cras efficitur vel elit eu varius.
Integer luctus facilisis dignissim.
Duis pretium lorem nec risus posuere euismod.
Quisque leo erat, suscipit eget metus vitae,
accumsan accumsan ex. Curabitur mattis non neque at hendrerit.
Praesent sollicitudin, nibh quis maximus vestibulum,
risus ipsum tempus leo, nec imperdiet quam purus eget sem.
Proin lectus nibh, viverra et vestibulum sed, lacinia ut ipsum.
```

è¿™æ®µè¯å¾ˆé•¿ï¼Œä¸­é—´å¤¹æ‚ç€è®¸å¤šæ¢è¡Œã€‚è€Œ JavaScript ä¸­æœ¬æ¥çš„å­—ç¬¦ä¸²å®šä¹‰æ–¹å¼æ˜¯ä¸æ”¯æŒç›´æ¥æ¢è¡Œçš„ï¼Œè¿æˆä¸€æ®µå°±å¤±å»äº†ç¾æ„Ÿï¼Œè¯¥æ€æ ·è§£å†³å‘¢ï¼Ÿ

ä¸€ä¸ªæœ€ç›´è§‚çš„åŠæ³•æ˜¯è¿™æ ·ï¼š

```javascript
const s = "Lorem ipsum dolor sit amet, consectetur adipiscing elit." +
"Sed eleifend vitae massa sed porttitor. Aliquam erat volutpat.\n" +
"Maecenas feugiat, urna sit amet feugiat gravida,\n" +
"felis ante lobortis tortor, vel dictum enim sem vitae eros.\n" +
"Vivamus mi eros, feugiat ut ex laoreet,\n" +
"commodo mattis nisi. Praesent mollis augue eu ligula scelerisque,\n" +
"et accumsan mauris pretium. Cras efficitur vel elit eu varius,\n" +
"Integer luctus facilisis dignissim.\n" +
"Duis pretium lorem nec risus posuere euismod.\n" +
"Quisque leo erat, suscipit eget metus vitae,\n" +
"accumsan accumsan ex. Curabitur mattis non neque at hendrerit.\n" +
"Praesent sollicitudin, nibh quis maximus vestibulum,\n" +
"risus ipsum tempus leo, nec imperdiet quam purus eget sem.\n" +
"Proin lectus nibh, viverra et vestibulum sed, lacinia ut ipsum.\n";
```

å°†å­—ç¬¦ä¸²æ ¹æ®æ¢è¡Œæ‹†æˆè®¸å¤šå°çš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²æœ«å°¾ä½¿ç”¨ `\n` æ ‡è®°æ¢è¡Œï¼Œä½¿ç”¨ `+` ä¸€ä¸ªä¸€ä¸ªè¿›è¡Œæ‹¼æ¥ã€‚å¾ˆé•¿æ—¶é—´é‡Œäººä»¬ç”¨çš„å°±æ˜¯è¿™ç§åŠæ³•ã€‚

å¦‚æœä¸è€ƒè™‘æ–‡æœ¬å‘ˆç°å‡ºæ¥çš„æ¨¡æ ·ï¼Œåªæ˜¯åœ¨ä»£ç é‡Œç¾è§‚ä¸€äº›ï¼Œä¹Ÿæœ‰ä¸€ç§ç®€ä¾¿ç‚¹çš„è§£å†³åŠæ³•ï¼š

```javascript
const s = "Lorem ipsum dolor sit amet, consectetur adipiscing elit.\
Sed eleifend vitae massa sed porttitor. Aliquam erat volutpat.\
Maecenas feugiat, urna sit amet feugiat gravida,\
felis ante lobortis tortor, vel dictum enim sem vitae eros.\
Vivamus mi eros, feugiat ut ex laoreet,\
commodo mattis nisi. Praesent mollis augue eu ligula scelerisque,\
et accumsan mauris pretium. Cras efficitur vel elit eu varius.\
Integer luctus facilisis dignissim.\
Duis pretium lorem nec risus posuere euismod.\
Quisque leo erat, suscipit eget metus vitae,\
accumsan accumsan ex. Curabitur mattis non neque at hendrerit.\
Praesent sollicitudin, nibh quis maximus vestibulum,\
risus ipsum tempus leo, nec imperdiet quam purus eget sem.\
Proin lectus nibh, viverra et vestibulum sed, lacinia ut ipsum.";
```

é€šè¿‡åœ¨æ¯ä¸€è¡Œæœ«å°¾åŠ ä¸Š `\` æ¥å°†æ¢è¡Œ*è½¬ä¹‰*ï¼Œä½¿å…¶ä¸è¢«è®¤ä¸ºæ˜¯è¯­æ³•ä¸Šä¸€è¡Œçš„æˆªæ­¢ï¼Œè¿æˆä¸€æ•´ä¸ªå­—ç¬¦ä¸²ã€‚

å‡å¦‚æˆ‘ä»¬éœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å…¶å®ƒä¸€äº›è¿è¡Œæ—¶æ‰ç¡®å®šçš„å†…å®¹ï¼Œæ¯”å¦‚ä¸€ä¸ªè¡¨è¾¾å¼çš„è¿ç®—ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå°†è¡¨è¾¾å¼çš„å€¼æ‹¼æ¥åœ¨ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œåƒè¿™æ ·ï¼š

```javascript
alert("1 + 13 - 32 + 11 + 53 - 29 çš„ç»“æœæ˜¯" + (1 + 13 - 32 + 11 + 53 - 29) + "ã€‚");
```

å¦‚æœè¦æ‹¼æ¥çš„è¡¨è¾¾å¼ä¸å¤šè¿˜å¥½ï¼Œå¤šäº†å†™èµ·æ¥å¯å°±éº»çƒ¦äº†ã€‚åŒæ—¶è€ƒè™‘åˆ°å¤šè¡Œå­—ç¬¦ä¸²å†™èµ·æ¥çš„ç§ç§ä¸ä¾¿ï¼Œåœ¨ ECMAScript 6 çš„æ ‡å‡†ä¸­è§„å®šäº†ä¸€ç§æ–°çš„å­—ç¬¦ä¸²å®šä¹‰æ³•â€”â€”**æ¨¡æ¿å­—ç¬¦ä¸²**ã€‚

æ¨¡æ¿å­—ç¬¦ä¸²èƒ½å¤Ÿæ‰«é™¤å·²æœ‰çš„é—®é¢˜ï¼Œå®ƒä½¿ç”¨ ` ï¼ˆåå¼•å·ï¼‰æ¥æ ‡è®°å­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“æŸã€‚ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²å¯ä»¥åƒè¿™æ ·ä½¿ç”¨ï¼š

```javascript
const s = `Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Sed eleifend vitae massa sed porttitor. Aliquam erat volutpat.
Maecenas feugiat, urna sit amet feugiat gravida,
felis ante lobortis tortor, vel dictum enim sem vitae eros.
Vivamus mi eros, feugiat ut ex laoreet,
commodo mattis nisi. Praesent mollis augue eu ligula scelerisque,
et accumsan mauris pretium. Cras efficitur vel elit eu varius.
Integer luctus facilisis dignissim.
Duis pretium lorem nec risus posuere euismod.
Quisque leo erat, suscipit eget metus vitae,
accumsan accumsan ex. Curabitur mattis non neque at hendrerit.
Praesent sollicitudin, nibh quis maximus vestibulum,
risus ipsum tempus leo, nec imperdiet quam purus eget sem.
Proin lectus nibh, viverra et vestibulum sed, lacinia ut ipsum.`;
```

å¦‚æœä½ å°† `s` æ˜¾ç¤ºå‡ºæ¥ï¼Œå°±ä¼šå‘ç°å®ƒå®Œå…¨è®°å½•äº†*åŸæ–‡*ã€‚ä¸ä½†å­—ç¬¦ä¸²ä¸­é—´å¯ä»¥ç›´æ¥æ¢è¡Œï¼Œæ¢è¡Œè¿˜å¯ä»¥è¢«ç›´æ¥è®°å½•ä¸‹æ¥ï¼Œä¸éœ€è¦å†ä½¿ç”¨å•ç‹¬çš„ `\n` æ¥æ ‡è®°æ¢è¡Œã€‚

ä½†æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²çš„æ–¹ä¾¿ä¹‹å¤„ä¸ä»…ä»…æ­¢äºæ­¤ã€‚è¯·çœ‹ï¼š

```javascript
const a = 3, b = 2;
const s = `I had ${a} apples, and Lily gave me ${b} apples.
Now I have ${a + b} apples.`
alert(s); // I had 3 apples, and Lily gave me 2 apples.
          // Now I have 5 apples.
```

åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ `${}` æ ‡è®°æ¥æ’å…¥ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„å€¼å¯ä»¥ç›´æ¥è¢«æ’å…¥æœ€ç»ˆçš„å­—ç¬¦ä¸²ä¸­ï¼Œçœå»äº†åå¤æ‹¼æ¥çš„éº»çƒ¦ã€‚å¦‚æœä½ åœ¨å­—ç¬¦ä¸²ä¸­éœ€è¦ä½¿ç”¨ `${}` è¿™ä¸‰ä¸ªå­—ç¬¦æœ¬èº«ï¼Œç›´æ¥ä½¿ç”¨`\`è¿›è¡Œè½¬ä¹‰å³å¯ï¼š

```javascript
const a = 3, b = 2;
const s = `I had \${a} apples, and Lily gave me \${b} apples.
Now I have \${a + b} apples.`
alert(s); // I had ${a} apples, and Lily gave me ${b} apples.
          // Now I have ${a + b} apples.
```

ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²å’Œæ™®é€šå­—ç¬¦ä¸²åœ¨æ„ä¹‰å’Œä½¿ç”¨ä¸Šæ˜¯åŸºæœ¬ä¸€è‡´çš„ã€‚



**æ ‡ç­¾æ¨¡æ¿**

æ¨¡æ¿å­—ç¬¦ä¸²çš„åŠŸèƒ½ä¸æ­¢äºæ­¤ã€‚å®ƒå¯ä»¥ç´§è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ã€‚è¿™è¢«ç§°ä¸º â€œ *æ ‡ç­¾æ¨¡æ¿* â€ åŠŸèƒ½ï¼ˆ tagged template ï¼‰ã€‚

```javascript
alert`123` // 123
//  ç­‰åŒäº
alert(123) // 123
```



å‰é¢è¯´è¿‡æ¨¡æ¿å­—ç¬¦ä¸²å’Œæ™®é€šå­—ç¬¦ä¸²åœ¨ä½¿ç”¨ä¸ŠåŸºæœ¬ä¸€è‡´ï¼Œå› æ­¤æ™®é€šå­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰å­—ç¬¦åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ä¾ç„¶ä¼šè¢«è½¬ä¹‰ã€‚å¦‚ï¼š

```javascript
alert`Hello\nworld`; // Hello
                     // world
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `String.raw` å‡½æ•°ï¼Œæ¥ä½¿æ¨¡æ¿å­—ç¬¦ä¸²çœŸæ­£â€œå¦‚å®â€è®°å½•æˆ‘ä»¬å†™ä¸‹çš„å†…å®¹ã€‚

```javascript
alert(String.raw`Hello\nworld`); // Hello\nworld
```

`String.raw` è™½ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨æ‹¬å·è¿›è¡Œè°ƒç”¨ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½ç”¨äºæ™®é€šå­—ç¬¦ä¸²ã€‚

```javascript
alert(String.raw(`Hello\nworld`)); // TypeError: Cannot convert undefined or null to object
alert(String.raw("Hello\nworld")); // TypeError: Cannot convert undefined or null to object
alert(String.raw"Hello\nworld"); // SyntaxError: missing ) after argument list
```

